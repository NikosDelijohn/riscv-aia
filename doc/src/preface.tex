
%=======================================================================
\chapter{Preface}

This document describes an Advanced Interrupt Architecture
being proposed for {\RISCV} systems.

No part of this document has yet been ratified
by the {\RISCV} International Association.
The table below shows the current status of each chapter,
and also indicates which chapters specify extensions to the
{\RISCV} ISA (instruction set architecture) and which are non-ISA.

{
\begin{table}[hbt]
\centering
\begin{tabular}{|l|c|c|}
\hline
Chapter                                                  & ISA? & Status \\
\hline
\hline
1.\ Introduction                                         & ---  & Frozen \\
2.\ Control and Status Registers (CSRs) Added to Harts   & Yes  & Frozen \\
3.\ Incoming MSI Controller (IMSIC)                      & Yes  & Frozen \\
4.\ Advanced Platform-Level Interrupt Controller (APLIC) & No   & Frozen \\
5.\ Duo-PLIC                                             & No   & Draft \\
6.\ Interrupts for Machine and Supervisor Levels         & Yes  & Frozen \\
7.\ Interrupts for Virtual Machines (VS Level)           & Yes  & Frozen \\
8.\ Interprocessor Interrupts (IPIs)                     & No   & Frozen \\
9.\ IOMMU Support for MSIs to Virtual Machines           & No   & Draft \\
\hline
\end{tabular}
\end{table}
}

An implementation adhering to the current document might not conform
to an eventual ratified Advanced Interrupt Architecture for {\RISCV}.
The chapters marked in the table as \emph{Frozen} are not expected
to change significantly before being put up for ratification.
The chapters marked \emph{Draft} are very much
at risk of changing before ratification.

Concerning the two chapters that remain in draft state:
\begin{itemize}

\item
The authors are not aware that any implementation of
a Duo-PLIC yet exists, even one just for simulation.
So long as that remains true, the Duo-PLIC specification of
Chapter~\ref{ch:DuoPLIC} will not advance beyond draft status.

\item
A separate standard is being developed for IOMMUs in {\RISCV} systems.
Chapter~\ref{ch:IOMMU} about an IOMMU's support for MSIs
(message-signaled interrupts) is expected to be finalized
only in conjunction with the full {\RISCV} IOMMU specification.
\end{itemize}

\section*{Changes for RC3 (Ratification Candidate 3)}

In Section~\ref{sec:virtIntrs-S} added the options
for bits 1 and 9 be writable in CSR \z{mvien},
and specified the effects of setting each of these bits.

\section*{Changes for RC2}

The only normative changes to this document
between versions RC1 and RC2 were to clarify that
field IID of CSR \z{hvictl} must support all
unsigned integer values of the number of bits implemented
for that field, and that writes to \z{hvictl}
always set IID in the most straightforward way.

A comment was added to Chapter~\ref{ch:IPIs} warning about
the possible need for FENCE instructions when IPIs are
sent to other harts by writing MSIs to those harts' IMSICs.

